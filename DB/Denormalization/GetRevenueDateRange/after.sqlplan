<ShowPlanXML xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan" Version="1.564" Build="16.0.1135.2"><BatchSequence><Batch><Statements><StmtSimple StatementText="SELECT &#xd;&#xa;            CAST(i.DatedOn AS DATE) AS RevenueDate,  -- Chỉ lấy ngày&#xd;&#xa;            SUM(i.AfterDiscount) AS TotalRevenue&#xd;&#xa;        FROM &#xd;&#xa;            Invoices i&#xd;&#xa;        WHERE &#xd;&#xa;            i.Paid = 1  -- Hóa đơn đã thanh toán&#xd;&#xa;            AND BranchId = @BranchId  -- Lọc theo BranchId&#xd;&#xa;            AND CAST(i.DatedOn AS DATE) &gt;= @StartDate  -- Lọc từ ngày bắt đầu&#xd;&#xa;            AND CAST(i.DatedOn AS DATE) &lt;= @EndDate  -- L&#xd;&#xa;        GROUP BY &#xd;&#xa;            i.DatedOn &#xd;&#xa;        ORDER BY &#xd;&#xa;            i.DatedOn" StatementId="1" StatementCompId="7" StatementType="SELECT" StatementSqlHandle="0x0900BDE1E4139FD13B90408C677CAD7A34120000000000000000000000000000000000000000000000000000" DatabaseContextSettingsId="2" ParentObjectId="354100302" StatementParameterizationType="0" RetrievedFromCache="true" StatementSubTreeCost="0.0531729" StatementEstRows="301" SecurityPolicyApplied="false" StatementOptmLevel="FULL" QueryHash="0xC073DEC087EEC6B8" QueryPlanHash="0xF8DF757214B548AA" StatementOptmEarlyAbortReason="GoodEnoughPlanFound" CardinalityEstimationModelVersion="160"><StatementSetOptions QUOTED_IDENTIFIER="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" NUMERIC_ROUNDABORT="false"></StatementSetOptions><QueryPlan DegreeOfParallelism="0" NonParallelPlanReason="NoParallelPlansInDesktopOrExpressEdition" CachedPlanSize="40" CompileTime="2" CompileCPU="2" CompileMemory="384"><MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" GrantedMemory="0" MaxUsedMemory="0"></MemoryGrantInfo><OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="208921" EstimatedPagesCached="104460" EstimatedAvailableDegreeOfParallelism="4" MaxCompileMemory="2998160"></OptimizerHardwareDependentProperties><OptimizerStatsUsage><StatisticsInfo LastUpdate="2024-12-13T22:33:08.47" ModificationCount="0" SamplingPercent="100" Statistics="[IDX_Invoices_Paid_BranchId_DatedOn]" Table="[Invoices]" Schema="[dbo]" Database="[sushiDB]"></StatisticsInfo><StatisticsInfo LastUpdate="2024-12-13T22:33:07.59" ModificationCount="0" SamplingPercent="100" Statistics="[IX_Invoices_OrderId]" Table="[Invoices]" Schema="[dbo]" Database="[sushiDB]"></StatisticsInfo><StatisticsInfo LastUpdate="2024-12-13T22:35:11.17" ModificationCount="0" SamplingPercent="71.5812" Statistics="[_WA_Sys_00000007_6383C8BA]" Table="[Invoices]" Schema="[dbo]" Database="[sushiDB]"></StatisticsInfo><StatisticsInfo LastUpdate="2024-12-13T22:35:11.21" ModificationCount="0" SamplingPercent="71.5812" Statistics="[_WA_Sys_00000009_6383C8BA]" Table="[Invoices]" Schema="[dbo]" Database="[sushiDB]"></StatisticsInfo></OptimizerStatsUsage><TraceFlags IsCompileTime="1"><TraceFlag Value="8017" Scope="Global"></TraceFlag></TraceFlags><TraceFlags IsCompileTime="0"><TraceFlag Value="8017" Scope="Global"></TraceFlag></TraceFlags><QueryTimeStats ElapsedTime="5" CpuTime="5"></QueryTimeStats><RelOp NodeId="0" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="301" EstimateIO="0" EstimateCPU="3.01e-05" AvgRowSize="22" EstimatedTotalSubtreeCost="0.0531729" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference><ColumnReference Column="Expr1001"></ColumnReference><ColumnReference Column="Expr1002"></ColumnReference></OutputList><ComputeScalar><DefinedValues><DefinedValue><ColumnReference Column="Expr1002"></ColumnReference><ScalarOperator ScalarString="CONVERT(date,[sushiDB].[dbo].[Invoices].[DatedOn] as [i].[DatedOn],0)"><Convert DataType="date" Style="0" Implicit="0"><ScalarOperator><Identifier><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></Identifier></ScalarOperator></Convert></ScalarOperator></DefinedValue></DefinedValues><RelOp NodeId="1" PhysicalOp="Stream Aggregate" LogicalOp="Aggregate" EstimateRows="301" EstimateIO="0" EstimateCPU="0.0041496" AvgRowSize="19" EstimatedTotalSubtreeCost="0.0531428" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference><ColumnReference Column="Expr1001"></ColumnReference></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="300" Batches="0" ActualElapsedms="4" ActualCPUms="4" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><StreamAggregate><DefinedValues><DefinedValue><ColumnReference Column="Expr1001"></ColumnReference><ScalarOperator ScalarString="SUM([sushiDB].[dbo].[Invoices].[AfterDiscount] as [i].[AfterDiscount])"><Aggregate Distinct="0" AggType="SUM"><ScalarOperator><Identifier><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="AfterDiscount"></ColumnReference></Identifier></ScalarOperator></Aggregate></ScalarOperator></DefinedValue></DefinedValues><GroupBy><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></GroupBy><RelOp NodeId="3" PhysicalOp="Nested Loops" LogicalOp="Inner Join" EstimateRows="6665.16" EstimatedRowsRead="6665.16" EstimateIO="0.0336396" EstimateCPU="0.00748868" AvgRowSize="35" EstimatedTotalSubtreeCost="0.0411283" TableCardinality="99990" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="Id"></ColumnReference><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="AfterDiscount"></ColumnReference><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="6667" Batches="0" ActualElapsedms="4" ActualCPUms="4" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><NestedLoops Optimized="0"><OuterReferences><ColumnReference Column="Expr1011"></ColumnReference><ColumnReference Column="Expr1012"></ColumnReference><ColumnReference Column="Expr1013"></ColumnReference></OuterReferences><RelOp NodeId="4" PhysicalOp="Merge Interval" LogicalOp="Merge Interval" EstimateRows="2" EstimateIO="0" EstimateCPU="0" AvgRowSize="27" EstimatedTotalSubtreeCost="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Column="Expr1011"></ColumnReference><ColumnReference Column="Expr1012"></ColumnReference><ColumnReference Column="Expr1013"></ColumnReference></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="1" Batches="0" ActualElapsedms="0" ActualCPUms="0" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><MergeInterval><RelOp NodeId="5" PhysicalOp="Concatenation" LogicalOp="Concatenation" EstimateRows="2" EstimateIO="0" EstimateCPU="0" AvgRowSize="27" EstimatedTotalSubtreeCost="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Column="Expr1011"></ColumnReference><ColumnReference Column="Expr1012"></ColumnReference><ColumnReference Column="Expr1013"></ColumnReference></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="2" Batches="0" ActualElapsedms="0" ActualCPUms="0" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><Concat><DefinedValues><DefinedValue><ColumnReference Column="Expr1011"></ColumnReference><ColumnReference Column="Expr1006"></ColumnReference><ColumnReference Column="Expr1009"></ColumnReference></DefinedValue><DefinedValue><ColumnReference Column="Expr1012"></ColumnReference><ColumnReference Column="Expr1007"></ColumnReference><ColumnReference Column="Expr1010"></ColumnReference></DefinedValue><DefinedValue><ColumnReference Column="Expr1013"></ColumnReference><ColumnReference Column="Expr1005"></ColumnReference><ColumnReference Column="Expr1008"></ColumnReference></DefinedValue></DefinedValues><RelOp NodeId="6" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="0" AvgRowSize="27" EstimatedTotalSubtreeCost="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Column="Expr1006"></ColumnReference><ColumnReference Column="Expr1007"></ColumnReference><ColumnReference Column="Expr1005"></ColumnReference></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="1" Batches="0" ActualElapsedms="0" ActualCPUms="0" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><ComputeScalar><DefinedValues><DefinedValue><ValueVector><ColumnReference Column="Expr1006"></ColumnReference><ColumnReference Column="Expr1007"></ColumnReference><ColumnReference Column="Expr1005"></ColumnReference></ValueVector><ScalarOperator ScalarString="GetRangeThroughConvert([@StartDate],NULL,(22))"><Intrinsic FunctionName="GetRangeThroughConvert"><ScalarOperator><Identifier><ColumnReference Column="@StartDate"></ColumnReference></Identifier></ScalarOperator><ScalarOperator><Const ConstValue="NULL"></Const></ScalarOperator><ScalarOperator><Const ConstValue="(22)"></Const></ScalarOperator></Intrinsic></ScalarOperator></DefinedValue></DefinedValues><RelOp NodeId="7" PhysicalOp="Constant Scan" LogicalOp="Constant Scan" EstimateRows="1" EstimateIO="0" EstimateCPU="0" AvgRowSize="0" EstimatedTotalSubtreeCost="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="1" Batches="0" ActualElapsedms="0" ActualCPUms="0" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><ConstantScan></ConstantScan></RelOp></ComputeScalar></RelOp><RelOp NodeId="8" PhysicalOp="Compute Scalar" LogicalOp="Compute Scalar" EstimateRows="1" EstimateIO="0" EstimateCPU="0" AvgRowSize="27" EstimatedTotalSubtreeCost="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Column="Expr1009"></ColumnReference><ColumnReference Column="Expr1010"></ColumnReference><ColumnReference Column="Expr1008"></ColumnReference></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="1" Batches="0" ActualElapsedms="0" ActualCPUms="0" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><ComputeScalar><DefinedValues><DefinedValue><ValueVector><ColumnReference Column="Expr1009"></ColumnReference><ColumnReference Column="Expr1010"></ColumnReference><ColumnReference Column="Expr1008"></ColumnReference></ValueVector><ScalarOperator ScalarString="GetRangeThroughConvert(NULL,[@EndDate],(42))"><Intrinsic FunctionName="GetRangeThroughConvert"><ScalarOperator><Const ConstValue="NULL"></Const></ScalarOperator><ScalarOperator><Identifier><ColumnReference Column="@EndDate"></ColumnReference></Identifier></ScalarOperator><ScalarOperator><Const ConstValue="(42)"></Const></ScalarOperator></Intrinsic></ScalarOperator></DefinedValue></DefinedValues><RelOp NodeId="9" PhysicalOp="Constant Scan" LogicalOp="Constant Scan" EstimateRows="1" EstimateIO="0" EstimateCPU="0" AvgRowSize="0" EstimatedTotalSubtreeCost="0" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="1" Batches="0" ActualElapsedms="0" ActualCPUms="0" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><ConstantScan></ConstantScan></RelOp></ComputeScalar></RelOp></Concat></RelOp></MergeInterval></RelOp><RelOp NodeId="10" PhysicalOp="Index Seek" LogicalOp="Index Seek" EstimateRows="6665.16" EstimatedRowsRead="6665.16" EstimateIO="0.0336396" EstimateCPU="0.00748868" AvgRowSize="35" EstimatedTotalSubtreeCost="0.0411283" TableCardinality="99990" Parallel="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row"><OutputList><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="Id"></ColumnReference><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="AfterDiscount"></ColumnReference><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></OutputList><RunTimeInformation><RunTimeCountersPerThread Thread="0" ActualRows="6667" Batches="0" ActualElapsedms="4" ActualCPUms="4" ActualScans="1" ActualLogicalReads="47" ActualPhysicalReads="0" ActualReadAheads="0" ActualLobLogicalReads="0" ActualLobPhysicalReads="0" ActualLobReadAheads="0" ActualRowsRead="6667" ActualEndOfScans="1" ActualExecutions="1" ActualExecutionMode="Row"></RunTimeCountersPerThread></RunTimeInformation><IndexScan Ordered="1" ScanDirection="FORWARD" ForcedIndex="0" ForceSeek="0" ForceScan="0" NoExpandHint="0" Storage="RowStore"><DefinedValues><DefinedValue><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="Id"></ColumnReference></DefinedValue><DefinedValue><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="AfterDiscount"></ColumnReference></DefinedValue><DefinedValue><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></DefinedValue></DefinedValues><Object Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Index="[IDX_Invoices_Paid_BranchId_DatedOn]" Alias="[i]" IndexKind="NonClustered" Storage="RowStore"></Object><SeekPredicates><SeekPredicateNew><SeekKeys><Prefix ScanType="EQ"><RangeColumns><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="Paid"></ColumnReference><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="BranchId"></ColumnReference></RangeColumns><RangeExpressions><ScalarOperator ScalarString="(1)"><Const ConstValue="(1)"></Const></ScalarOperator><ScalarOperator ScalarString="[@BranchId]"><Identifier><ColumnReference Column="@BranchId"></ColumnReference></Identifier></ScalarOperator></RangeExpressions></Prefix><StartRange ScanType="GT"><RangeColumns><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></RangeColumns><RangeExpressions><ScalarOperator ScalarString="[Expr1011]"><Identifier><ColumnReference Column="Expr1011"></ColumnReference></Identifier></ScalarOperator></RangeExpressions></StartRange><EndRange ScanType="LT"><RangeColumns><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></RangeColumns><RangeExpressions><ScalarOperator ScalarString="[Expr1012]"><Identifier><ColumnReference Column="Expr1012"></ColumnReference></Identifier></ScalarOperator></RangeExpressions></EndRange></SeekKeys></SeekPredicateNew></SeekPredicates><Predicate><ScalarOperator ScalarString="CONVERT(date,[sushiDB].[dbo].[Invoices].[DatedOn] as [i].[DatedOn],0)&gt;=[@StartDate] AND CONVERT(date,[sushiDB].[dbo].[Invoices].[DatedOn] as [i].[DatedOn],0)&lt;=[@EndDate]"><Logical Operation="AND"><ScalarOperator><Compare CompareOp="GE"><ScalarOperator><Convert DataType="date" Style="0" Implicit="0"><ScalarOperator><Identifier><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></Identifier></ScalarOperator></Convert></ScalarOperator><ScalarOperator><Identifier><ColumnReference Column="@StartDate"></ColumnReference></Identifier></ScalarOperator></Compare></ScalarOperator><ScalarOperator><Compare CompareOp="LE"><ScalarOperator><Convert DataType="date" Style="0" Implicit="0"><ScalarOperator><Identifier><ColumnReference Database="[sushiDB]" Schema="[dbo]" Table="[Invoices]" Alias="[i]" Column="DatedOn"></ColumnReference></Identifier></ScalarOperator></Convert></ScalarOperator><ScalarOperator><Identifier><ColumnReference Column="@EndDate"></ColumnReference></Identifier></ScalarOperator></Compare></ScalarOperator></Logical></ScalarOperator></Predicate></IndexScan></RelOp></NestedLoops></RelOp></StreamAggregate></RelOp></ComputeScalar></RelOp><ParameterList><ColumnReference Column="@EndDate" ParameterDataType="date" ParameterCompiledValue="&apos;2024-12-30&apos;" ParameterRuntimeValue="&apos;2024-12-30&apos;"></ColumnReference><ColumnReference Column="@StartDate" ParameterDataType="date" ParameterCompiledValue="&apos;2024-01-01&apos;" ParameterRuntimeValue="&apos;2024-01-01&apos;"></ColumnReference><ColumnReference Column="@BranchId" ParameterDataType="uniqueidentifier" ParameterCompiledValue="{guid&apos;F490D25C-9C0B-4674-975F-53E1D1BC5366&apos;}" ParameterRuntimeValue="{guid&apos;F490D25C-9C0B-4674-975F-53E1D1BC5366&apos;}"></ColumnReference></ParameterList></QueryPlan></StmtSimple></Statements></Batch></BatchSequence></ShowPlanXML>